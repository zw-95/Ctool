import{u as T,i as z}from"./action-01192c39.js";import{d as E,H as F,y as L,I as k,G as R,z as j,D as A,r as p,A as D,a as b,k as v,x as s,w as H,B as N,j as n,v as _,F as O,aN as G,aO as K,aK as M}from"./tool-ab65ccdd.js";import"./modulepreload-polyfill-3cfb730f.js";const P=c=>(G("data-v-52da9bb1"),c=c(),K(),c),W={style:{display:"grid","grid-template-columns":"1fr 5px 1fr","grid-column-gap":"10px","margin-top":"5px"},class:"ctool-page-option"},q={style:{display:"grid","grid-template-columns":"120px 1fr 120px","grid-column-gap":"5px"}},J=P(()=>_("span",{style:{display:"flex","justify-content":"center","align-items":"center"}},"|",-1)),Q=E({__name:"Bcrypt",async setup(c){let u,m;const i=new Worker(new URL(""+new URL("worker-ac6d4349.js",import.meta.url).href,self.location),{type:"module"});F(()=>{i.terminate()});const e=T(([u,m]=L(()=>z({input:"",rounds:10,hash:"",check_result:null,version:"2a"},{paste:!1})),u=await u,m(),u));let d=k(!1),h=k(!1);i.onmessage=function(r){const t=r.data;if(console.log("main accept",t),t.method==="hash")return $(t.data.err,t.data.hash);if(t.method==="compare")return V(t.data.err,t.data.res)};const y=(r,t)=>{let o={method:r,data:t};console.log("main send",o),i.postMessage(o)},x=()=>{if(e.current.input!==""){if(e.current.rounds<4||e.current.rounds>30)throw new Error($t("bcrypt_rounds_range",[4,30]));d.value=!0,y("hash",{input:e.current.input,rounds:e.current.rounds,version:e.current.version})}},$=(r,t)=>{if(d.value=!1,r)throw new Error(r.message);e.current.hash=t,e.current.check_result=null,e.success({copy_text:e.current.hash})},w=()=>{e.current.input===""||e.current.hash===""||(h.value=!0,y("compare",{input:e.current.input,hash:e.current.hash}))},V=(r,t)=>{h.value=!1,e.current.check_result=t;const o=e.current.check_result?$t("bcrypt_check_result_success"):$t("bcrypt_check_result_error");e.success({message:`${$t("bcrypt_check")} ${o}`,message_type:e.current.check_result?"success":"error"})},B=R.range(4,33).map(r=>({label:`${$t("bcrypt_rounds")} ${r}`,value:r})),C=[{label:"2a",value:"2a"},{label:"2b",value:"2b"},{label:"2y",value:"2y"}],U=j(()=>e.current.check_result===null?$t("bcrypt_check"):`${$t("bcrypt_check")} (${e.current.check_result?$t("bcrypt_check_result_success"):$t("bcrypt_check_result_error")})`);return A(()=>({input:e.current.input,hash:e.current.hash}),()=>{e.current.check_result=null}),(r,t)=>{const o=p("Textarea"),I=p("HeightResize"),g=p("Select"),f=p("Button"),S=D("row");return b(),v(O,null,[s(I,{append:[".ctool-page-option"]},{default:H(({height:a})=>[N((b(),v("div",null,[s(o,{height:a,modelValue:n(e).current.input,"onUpdate:modelValue":t[0]||(t[0]=l=>n(e).current.input=l),"float-text":r.$t("bcrypt_password"),placeholder:r.$t("bcrypt_password"),onClickFloatText:t[1]||(t[1]=l=>r.$copy(n(e).current.input))},null,8,["height","modelValue","float-text","placeholder"]),s(o,{height:a,modelValue:n(e).current.hash,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).current.hash=l),"float-text":r.$t("bcrypt_hash"),placeholder:r.$t("bcrypt_hash"),onClickFloatText:t[3]||(t[3]=l=>r.$copy(n(e).current.hash))},null,8,["height","modelValue","float-text","placeholder"])])),[[S,"1-1"]])]),_:1},8,["append"]),_("div",W,[_("div",q,[s(g,{modelValue:n(e).current.rounds,"onUpdate:modelValue":t[4]||(t[4]=a=>n(e).current.rounds=a),options:n(B),class:"select-box"},null,8,["modelValue","options"]),s(g,{modelValue:n(e).current.version,"onUpdate:modelValue":t[5]||(t[5]=a=>n(e).current.version=a),options:C,class:"select-box"},null,8,["modelValue"]),s(f,{loading:n(d),onClick:x,type:"primary",long:"",text:r.$t("bcrypt_generate")},null,8,["loading","text"])]),J,s(f,{loading:n(h),onClick:w,type:"primary",long:"",text:U.value},null,8,["loading","text"])])],64)}}});const ee=M(Q,[["__scopeId","data-v-52da9bb1"]]);export{ee as default};
